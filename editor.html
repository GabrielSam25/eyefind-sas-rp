<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Editor Responsivo - GrapesJS</title>

  <link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet"/>
  <script src="https://unpkg.com/grapesjs"></script>

  <style>
    body { margin: 0; }
  </style>
</head>
<body>

<div id="gjs"></div>

<script>
const editor = grapesjs.init({
  container: '#gjs',
  height: '100vh',
  storageManager: false,

  deviceManager: {
    devices: [
      { name: 'Desktop', width: '' },
      { name: 'Tablet', width: '768px' },
      { name: 'Mobile', width: '375px' }
    ]
  },

  blockManager: {
    blocks: [

      // SEÇÃO FLEX
      {
        id: 'section',
        label: 'Seção',
        category: 'Layout',
        content: `
          <section style="
            display:flex;
            flex-wrap:wrap;
            padding:60px 20px;
            gap:20px;
            justify-content:center;
          ">
          </section>
        `
      },

      // COLUNA FLEX
      {
        id: 'column',
        label: 'Coluna',
        category: 'Layout',
        content: `
          <div style="
            flex:1 1 300px;
            min-height:150px;
            padding:20px;
            background:#f3f4f6;
            border-radius:10px;
          ">
            Conteúdo
          </div>
        `
      },

      // TÍTULO
      {
        id: 'title',
        label: 'Título',
        category: 'Texto',
        content: `
          <h2 style="
            font-size:32px;
            text-align:center;
            width:100%;
          ">
            Seu título aqui
          </h2>
        `
      },

      // BOTÃO
      {
        id: 'button',
        label: 'Botão',
        category: 'Elementos',
        content: `
          <a href="#" style="
            display:inline-block;
            padding:12px 24px;
            background:#4f46e5;
            color:white;
            text-decoration:none;
            border-radius:8px;
            font-weight:bold;
          ">
            Clique Aqui
          </a>
        `
      }

    ]
  }
});

// BOTÃO EXPORTAR
const btn = document.createElement("button");
btn.innerText = "Exportar HTML";
btn.style.position = "fixed";
btn.style.bottom = "20px";
btn.style.right = "20px";
btn.style.padding = "10px 20px";
btn.style.background = "#111";
btn.style.color = "white";
btn.style.border = "none";
btn.style.cursor = "pointer";
btn.style.zIndex = "9999";

btn.onclick = () => {
  const html = editor.getHtml();
  const css = editor.getCss();
  const finalCode = `
<!DOCTYPE html>
<html>
<head>
<style>${css}</style>
</head>
<body>
${html}
</body>
</html>
  `;
  console.log(finalCode);
  alert("Código exportado no console!");
};

document.body.appendChild(btn);

</script>

</body>
</html>
